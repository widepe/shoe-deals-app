// modelNameCleaner.js
// Cleans promo/noise words from a shoe model name (and optionally from a title string)

function cleanModelName(input) {
  let model = String(input || "").trim();
  if (!model) return "";
  
  // Remove leading promo words
  model = model.replace(/^(Clearance|Sale|New|Limited|Hot|Deal)\s+/gi, "");
  
  // Remove trailing category/promo words
  model = model.replace(/\s*-?\s*(Clearance|Sale|Running|Race|Trail|Walking|Final)\s*$/gi, "");
  
  // Remove "shoes" anywhere
  model = model.replace(/\bShoes?\b/gi, " ");
  
  // Remove marketing phrases (anywhere in text)
  model = model.replace(/\b(all sales? final|no returns?|final sale|non-returnable|as-is)\b/gi, "");
  model = model.replace(/\b(free (shipping|returns)|ships? free|fast shipping)\b/gi, "");
  model = model.replace(/\b(best seller|top rated|customer favorite|staff picks?)\b/gi, "");
  model = model.replace(/\b(limited (time|edition)|while supplies last)\b/gi, "");
  model = model.replace(/\b(new arrival|just in|back in stock|low stock|almost gone)\b/gi, "");
  model = model.replace(/\b(brand new|new with(out)? box|open box|like new)\b/gi, "");
  model = model.replace(/\b(in stock|out of stock|pre-?order|coming soon)\b/gi, "");
  model = model.replace(/\b(hot deal|deal of the day)\b/gi, "");
  
  // Remove price mentions
  model = model.replace(/\b(save|on sale|discounted|reduced)\b/gi, "");
  model = model.replace(/\b\d+%\s*off\b/gi, "");
  model = model.replace(/\b(was|now|reg|originally)\s*\$[\d,.]+\b/gi, "");
  
  // Collapse multiple spaces and trim
  model = model.replace(/\s+/g, " ").trim();
  
  return model;
}
module.exports = { cleanModelName };
